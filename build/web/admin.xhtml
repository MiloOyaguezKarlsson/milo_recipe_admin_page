<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>IRDb - Admin</title>
    </h:head>
    <h:body>
        <h1>IRDb - Admin Page</h1>
        
        <h:form>
            <h:outputLabel value="Logged in as #{loginBean.username}"/>
            <p:commandButton value="Log Out" action="#{loginBean.logout}"/>
        </h:form>
        

        <p:tabView>
            <p:tab title="Recipes">
                <h:outputText value="#{recipeBean.message}"/>
                <h:form id="recipeForm">
                    <p:dataTable var="recipe" value="#{recipeBean.recipes}" id="recipeTable">
                        <p:column headerText="ID">
                            <h:outputText value="#{recipe.id}"/>
                        </p:column>
                        <p:column headerText="Name">
                            <h:outputText value="#{recipe.name}"/>
                        </p:column>
                        <p:column headerText="User">
                            <h:outputText value="#{recipe.user}"/>
                        </p:column>
                        <p:column headerText="Description">
                            <h:outputText value="#{recipe.description}"/>
                        </p:column>
                        <p:column headerText="Date">
                            <h:outputText value="#{recipe.date}"/>
                        </p:column>
                        <p:column>

                            <p:commandButton value="Delete" icon="ui-icon-trash" 
                                             action="#{recipeBean.deleteRecipe(recipe.id)}">
                            </p:commandButton>

                        </p:column>
                    </p:dataTable>
                </h:form>
            </p:tab>
            
            <p:tab title="Users">
                <h:outputText value="#{userBean.message}"/>
                <h:form id="userForm">
                    <p:dataTable var="user" value="#{userBean.users}" id="userTable">
                        <p:column headerText="Username">
                            <h:outputText value="#{user.username}"/>
                        </p:column>
                        <p:column headerText="Password">
                            <p:inputText binding="#{password}"/>
                            <p:commandButton value="Set password" icon="ui-icon-disk"
                                             action="#{userBean.setPassword(password.value, user.username)}"
                                             />
                        </p:column>
                        <p:column>
                            <p:commandButton value="Promote" icon="ui-icon-circle-arrow-n"
                                             action="#{userBean.promote(user.username)}"
                                             />
                        </p:column>
                        <p:column>
                            <p:commandButton value="Delete" icon="ui-icon-trash" 
                                             action="#{userBean.deleteUser(user.username)}"
                                             />
                        </p:column>
                    </p:dataTable>
                </h:form>
            </p:tab>
            
            <p:tab title="Comments">
                <h:outputText value="#{commentBean.message}"/>
                <h:form id="commentForm">
                    <p:dataTable var="comment" value="#{commentBean.comments}" id="commentTable">
                        <p:column headerText="ID">
                            <h:outputText value="#{comment.id}"/>
                        </p:column>
                        <p:column headerText="Recipe">
                            <h:outputText value="#{comment.recipeID}"/>
                        </p:column>
                        <p:column headerText="User">
                            <h:outputText value="#{comment.user}"/>
                        </p:column>
                        <p:column headerText="Comment">
                            <h:outputText value="#{comment.comment}"/>
                        </p:column>
                        <p:column headerText="Date">
                            <h:outputText value="#{comment.date}"/>
                        </p:column>
                        <p:column>
                            <p:commandButton value="Delete" icon="ui-icon-trash"
                                             action="#{commentBean.deleteComment(comment.id)}"/>
                        </p:column>
                    </p:dataTable>
                </h:form>
            </p:tab>
        </p:tabView>
    </h:body>
</html>

